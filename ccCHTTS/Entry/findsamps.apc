{Application 'FINDSAMPS' logic file generated by CSPro }
PROC GLOBAL

  set explicit;

  numeric ncases, wstage, maxsamples;

PROC TESTLOG_FF
preproc

  ncases     = 0;
  wstage     = tonumber( sysparm()[1:1] );
  maxsamples = tonumber( sysparm()[2:2] );

PROC LEVEL1
  if wstage = LSTAGE & !LSTATUS & !LLOCK & ncases < maxsamples then
    TEMP_ID = LBAR;
    writecase( TEMP_DICT, LBAR );
    errmsg( "case %s/%d found", lbar, labid );
    ncases = ncases + 1;
  else
    skip case;
  endif;
